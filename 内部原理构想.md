# Sokoban - 内部原理构想
### 温州大学 21人工智能 朱锦乐 第二学期 程序设计课程设计 期末作业
---
## 已有知识的应用
1. 内部地图使用 `Struct` 进行定义，结构体内包含代表单个地图行数的 `ROW` 与代表单个地图列数的 `COL` 与代表内部地图的 `Map` 二维数组。
2. 在程序开始运行时 使用文件函数 `fopen` 读取 `map*.txt` 文件，并将其内容转换为 `Struct` 对象。并且各个地图使用 `链表` 进行连接，每读入一个地图，就将其链接到 `Map` 对象的 `next` 属性中，使用 `malloc` 函数进行动态的存分配。由此可以在不浪费内存的情况下，将总数未知的地图都读入内存，因此本游戏可以无限地增加地图而不需要去修改源代码。
3. 使用 `CMD` 函数固定窗口大小并且设置文字颜色
4. 没想好

## 内部函数的解释
1. main 主函数
2. menu 进行窗口初始化，设置大小，隐藏光标，显示菜单，同时处理交互
3. print 用于刷新窗口打印提示信息
4. print_map 用于打印地图
5. check 用于检查箱子是否移动到了目标位置，于每一次 `move` 后调用
6. load 用于加载地图
7. init 用于初始化游戏
8. MoveCursor 用于移动光标
9. move 用于移动人物

## 地图原理构想
#### &emsp;&emsp;这个东西在查阅多方资料之后决定使用 `XSB` 格式，是推箱子游戏的通用保存格式，和样子可以做到最佳的兼容性，支持使用庞大的DIY地图库

|字符|含义|
|:--:|:--:|
|@|人 (man)|
|+|人在目标点 (man on goal)|
|$|箱子 (box)|
|*|箱子在目标点 (box on goal)|
|#|墙 (wall)|
|.|目标点 (goal)|
|-|XSB格式空格代表“地板”，</br>又因为连续多个空格在网页或即时通讯软件中偶尔显示有问题，</br>也用“-”或“_”代替空格。(floor, represented by ' ' or '-' or '_')|

#### &emsp;&emsp;也相应地，在读入系统后存储为 1-7，地图大小固定为列20行15
|字符|含义|
|:--:|:--:|
|1|人 (man)|
|2|人在目标点 (man on goal)|
|3|箱子 (box)|
|4|箱子在目标点 (box on goal)|
|5|墙 (wall)|
|6|目标点 (goal)|
|7|“地板”|

---
## 迭代日志
### v0.1

    写下了第一版的内部原理构想

### v0.2
    加入了一些函数，写了地图的表示方法。
---
本项目使用 `WTFPL` 即 `Do What The Fuck You Want To Public License` 协议进行授权，本协议内容可见[dtf0/wtfpl](https://github.com/dtf0/wtfpl).